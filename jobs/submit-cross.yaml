description: CIFAR-10 Robustness [CROSS]

target:
  vc: msrlabs
  cluster: eu1

environment:
  image: microsoft_pytorch:v1.2.0_gpu_cuda9.0_py36_release_gpuenv_hvd0.16.2
  registry: phillyregistry.azurecr.io
  setup:
  - pip install torchnet --user
  - pip install statsmodels --user
  - pip install tqdm --user

code:
  local_dir: $CONFIG_DIR/../

data:
  local_dir: $CONFIG_DIR/../data/
  remote_dir: datasets/

search:
  job_template:
    name: cifar
    sku: G1
    command:
    - python3 -m src.train
      --noise={train_noise}
      --sigma={sigma}
      --experiment-name=cifar_{train_noise}_{test_noise}_{sigma}
      --p=2
    - python3 -m src.test
      --noise={test_noise}
      --sigma={sigma}
      --experiment-name=cifar_{train_noise}_{test_noise}_{sigma}
      --p=2
  type: grid
  max_trials: 294
  params:
    - name: sigma
      spec: discrete
      values: [0.15, 0.25, 0.5, 0.75, 1.0, 1.25]
    - name: train_noise
      spec: discrete
      values: ["GaussianNoise", "LaplaceNoise", "UniformNoise",
               "Exp2PolyNoise1", "Exp2PolyNoise1024",
               "PTailNoise2", "PTailNoise100"]
    - name: test_noise
      spec: discrete
      values: ["GaussianNoise", "LaplaceNoise", "UniformNoise",
               "Exp2PolyNoise1", "Exp2PolyNoise1024",
               "PTailNoise2", "PTailNoise100"]

